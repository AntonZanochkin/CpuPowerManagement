<Window x:Class="CpuPowerManagement.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:CpuPowerManagement" 
        xmlns:viewModels="clr-namespace:CpuPowerManagement.ViewModels"
        xmlns:ui="http://schemas.lepo.co/wpfui/2022/xaml"
        mc:Ignorable="d"
        Background="{DynamicResource ApplicationBackgroundBrush}"
        Foreground="{DynamicResource TextFillColorPrimaryBrush}"
        Title="MainWindow" Height="450" Width="800">
  <Window.DataContext>
    <viewModels:MainViewModel />
  </Window.DataContext>
  <Grid>
    <StackPanel Margin="10,10,0,10">
      <ui:CardExpander Name="sdAmdApuThermal" IsEnabled="True" IsExpanded="True" Icon="Temperature20" Margin="0,0,15,0">
        <ui:CardExpander.Header>
          <Grid>
            <Grid.ColumnDefinitions>
              <ColumnDefinition Width="*" />
              <ColumnDefinition Width="Auto" />
            </Grid.ColumnDefinitions>
            <StackPanel Grid.Column="0" VerticalAlignment="Center">
              <TextBlock FontSize="14" FontWeight="Medium" Text="CPU Power Limit" />
              <TextBlock FontSize="12" Foreground="{DynamicResource TextFillColorTertiaryBrush}" Text="Provides the ability to set CPU Power Limits."/>
            </StackPanel>
          </Grid>
        </ui:CardExpander.Header>
        <StackPanel>
          <!-- Power Limit 1 Wats  --> 
          <StackPanel Margin="20,10,0,10">
            <StackPanel Orientation="Horizontal">
              <TextBlock FontWeight="DemiBold" FontSize="13" Foreground="{DynamicResource TextFillColorPrimaryBrush}">Power Limit 1 Wats</TextBlock>
            </StackPanel>
            <Grid Margin="0,8,0,0">
              <Grid.ColumnDefinitions>
                <ColumnDefinition Width="150" />
                <ColumnDefinition Width="50" />
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="50" />
                <ColumnDefinition Width="Auto" />
              </Grid.ColumnDefinitions>

              <ui:NumberBox Name="Pl1WattsNumberBox" 
                Value="{Binding PowerLimits.Pl1Watts, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" 
                Minimum="5" Maximum="105"                             
                Grid.Column="0" 
                SmallChange="1" 
                MaxDecimalPlaces="0" />

              <TextBlock Text="{Binding ElementName=Pl1WattsNumberBox, Path=Minimum}" 
                         VerticalAlignment="Center"
                         HorizontalAlignment="Right"
                         FontSize="12"
                         Grid.Column="1" Margin="10,0,0,0"/>

              <Slider Name="SliderPowerLimit1Wats" 
                      Value="{Binding PowerLimits.Pl1Watts}"
                      Minimum="{Binding ElementName=Pl1WattsNumberBox, Path=Minimum}" 
                      Maximum="{Binding ElementName=Pl1WattsNumberBox, Path=Maximum}"
                      Grid.Column="2" Margin="5,0,0,0" 
                      TickFrequency="1" VerticalAlignment="Center" 
                      IsSnapToTickEnabled="True" 
                      TouchDown="SizeSlider_TouchDown"/>

              <TextBlock Text="{Binding ElementName=SliderPowerLimit1Wats, Path=Maximum}" 
                         VerticalAlignment="Center"
                         HorizontalAlignment="Left"
                         FontSize="12"
                         Grid.Column="3" Margin="5,0,0,0"/>

              <Button Content="Apply" 
                      Command="{Binding ApplyPowerLimit1Command}" 
                      Grid.Column="4" 
                      Margin="20,0,0,0" />
            </Grid>
          </StackPanel>
          <!-- Power Limit 1 Time Window Sec.-->
          <StackPanel Margin="20,10,0,10">
            <StackPanel Orientation="Horizontal">
              <TextBlock FontWeight="DemiBold" FontSize="13" Foreground="{DynamicResource TextFillColorPrimaryBrush}">Power Limit 1 Time Window Sec.</TextBlock>
            </StackPanel>
            <Grid Margin="0,8,0,0">
              <Grid.ColumnDefinitions>
                <ColumnDefinition Width="150" />
                <ColumnDefinition Width="50" />
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="50" />
                <ColumnDefinition Width="Auto" />
              </Grid.ColumnDefinitions>

              <ui:NumberBox 
                Name="Pl1TimeWindowSecNumberBox"
                Value="{Binding PowerLimits.Pl1TimeWindowSec, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" 
                Minimum="0.001"
                Maximum="1000" 
                Grid.Column="0" 
                SmallChange="0.001"
                MaxDecimalPlaces="3" />
              <TextBlock Text="{Binding ElementName=SliderPl1TimeWindowSec, Path=Minimum}" 
                VerticalAlignment="Center"
                HorizontalAlignment="Right"
                FontSize="12"
                Grid.Column="1" Margin="10,0,0,0"/>

              <Slider Name="SliderPl1TimeWindowSec" 
                Value="{Binding PowerLimits.Pl1TimeWindowSec}" 
                Minimum="{Binding ElementName=Pl1TimeWindowSecNumberBox, Path=Minimum}" 
                Maximum="{Binding ElementName=Pl1TimeWindowSecNumberBox, Path=Maximum}"
                Grid.Column="2" Margin="5,0,0,0"
                TickFrequency="1" VerticalAlignment="Center" 
                IsSnapToTickEnabled="True"
                SmallChange="0.001"
                TouchDown="SizeSlider_TouchDown"/>

              <TextBlock Text="{Binding ElementName=SliderPl1TimeWindowSec, Path=Maximum}" 
                VerticalAlignment="Center"
                HorizontalAlignment="Left"
                FontSize="12"
                Grid.Column="3" Margin="5,0,0,0"/>

              <Button Content="Apply" 
                Command="{Binding ApplyPowerLimit1Command}" 
                Grid.Column="4" 
                Margin="20,0,0,0" />
            </Grid>
          </StackPanel>
          <!-- Power Limit 2 Wats  -->
          <StackPanel Margin="20,10,0,10">
            <StackPanel Orientation="Horizontal">
              <TextBlock FontWeight="DemiBold" FontSize="13" Foreground="{DynamicResource TextFillColorPrimaryBrush}">Power Limit 2 Wats</TextBlock>
            </StackPanel>

            <Grid Margin="0,8,0,0">
              <Grid.ColumnDefinitions>
                <ColumnDefinition Width="150" />
                <ColumnDefinition Width="50" />
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="50" />
                <ColumnDefinition Width="Auto" />
              </Grid.ColumnDefinitions>

              <ui:NumberBox 
                Name="Pl2WattsNumberBox" 
                Value="{Binding PowerLimits.Pl2Watts, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" 
                Minimum="10" 
                Maximum="105" 
                Grid.Column="0" 
                SmallChange="1" 
                MaxDecimalPlaces="0" />

              <TextBlock Text="{Binding ElementName=SliderPowerLimit2Wats, Path=Minimum}" 
                         VerticalAlignment="Center"
                         HorizontalAlignment="Right"
                         FontSize="12"
                         Grid.Column="1" Margin="10,0,0,0"/>

              <Slider Name="SliderPowerLimit2Wats" 
                      Value="{Binding PowerLimits.Pl2Watts}" 
                      Minimum="{Binding ElementName=Pl2WattsNumberBox, Path=Minimum}" 
                      Maximum="{Binding ElementName=Pl2WattsNumberBox, Path=Maximum}"
                      Grid.Column="2" Margin="5,0,0,0" 
                      TickFrequency="1" VerticalAlignment="Center" 
                      IsSnapToTickEnabled="True" 
                      TouchDown="SizeSlider_TouchDown"/>

              <TextBlock Text="{Binding ElementName=SliderPowerLimit2Wats, Path=Maximum}" 
                         VerticalAlignment="Center"
                         HorizontalAlignment="Left"
                         FontSize="12"
                         Grid.Column="3" Margin="5,0,0,0"/>

              <Button Content="Apply" 
                      Command="{Binding ApplyPowerLimit1Command}" 
                      Grid.Column="4" 
                      Margin="20,0,0,0" />
            </Grid>

          </StackPanel>
          <!-- Power Limit 2 Time Window Sec.-->
          <StackPanel Margin="20,10,0,10">
            <StackPanel Orientation="Horizontal">
              <TextBlock FontWeight="DemiBold" FontSize="13" Foreground="{DynamicResource TextFillColorPrimaryBrush}">Power Limit 2 Time Window Sec.</TextBlock>
            </StackPanel>
            <Grid Margin="0,8,0,0">
              <Grid.ColumnDefinitions>
                <ColumnDefinition Width="150" />
                <ColumnDefinition Width="50" />
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="50" />
                <ColumnDefinition Width="Auto" />
              </Grid.ColumnDefinitions>

              <ui:NumberBox 
                Name="Pl2TimeWindowSecNumberBox"
                Value="{Binding PowerLimits.Pl2TimeWindowSec, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" 
                Minimum="0.001"
                Maximum="1000" 
                Grid.Column="0" 
                SmallChange="0.001"
                MaxDecimalPlaces="3" />
              <TextBlock Text="{Binding ElementName=SliderPl2TimeWindowSec, Path=Minimum}" 
                         VerticalAlignment="Center"
                         HorizontalAlignment="Right"
                         FontSize="12"
                         Grid.Column="1" Margin="10,0,0,0"/>

              <Slider Name="SliderPl2TimeWindowSec" 
                      Value="{Binding PowerLimits.Pl2TimeWindowSec}" 
                      Minimum="{Binding ElementName=Pl1TimeWindowSecNumberBox, Path=Minimum}" 
                      Maximum="{Binding ElementName=Pl1TimeWindowSecNumberBox, Path=Maximum}"
                      Grid.Column="2" Margin="5,0,0,0"
                      TickFrequency="1" VerticalAlignment="Center" 
                      IsSnapToTickEnabled="True"
                      SmallChange="0.001"
                      TouchDown="SizeSlider_TouchDown"/>

              <TextBlock Text="{Binding ElementName=SliderPl2TimeWindowSec, Path=Maximum}" 
                         VerticalAlignment="Center"
                         HorizontalAlignment="Left"
                         FontSize="12"
                         Grid.Column="3" Margin="5,0,0,0"/>

              <Button Content="Apply" 
                      Command="{Binding ApplyPowerLimit2Command}" 
                      Grid.Column="4" 
                      Margin="20,0,0,0" />
            </Grid>
          </StackPanel>
        </StackPanel>

      </ui:CardExpander>
    </StackPanel>

  </Grid>
</Window>
